{
  "name": "form-wizard",
  "description": "Multi-step form wizard with step validation and navigation",
  "type": "component",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [
    "utils",
    "button"
  ],
  "files": [
    {
      "path": "form-wizard/index.tsx",
      "type": "component",
      "content": "import * as React from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\nexport interface WizardStep {\n  id: string\n  title: string\n  description?: string\n  content: React.ReactNode\n  validate?: () => boolean | Promise<boolean>\n}\n\nexport interface FormWizardProps {\n  steps: WizardStep[]\n  onComplete: (data?: any) => void | Promise<void>\n  onStepChange?: (stepIndex: number) => void\n  className?: string\n  showStepIndicator?: boolean\n}\n\nexport function FormWizard({\n  steps,\n  onComplete,\n  onStepChange,\n  className,\n  showStepIndicator = true,\n}: FormWizardProps) {\n  const [currentStep, setCurrentStep] = React.useState(0)\n  const [isValidating, setIsValidating] = React.useState(false)\n\n  const currentStepData = steps[currentStep]\n  const isFirstStep = currentStep === 0\n  const isLastStep = currentStep === steps.length - 1\n\n  const handleNext = async () => {\n    if (currentStepData.validate) {\n      setIsValidating(true)\n      try {\n        const isValid = await currentStepData.validate()\n        if (!isValid) {\n          setIsValidating(false)\n          return\n        }\n      } catch (error) {\n        console.error('Validation error:', error)\n        setIsValidating(false)\n        return\n      }\n      setIsValidating(false)\n    }\n\n    if (isLastStep) {\n      await onComplete()\n    } else {\n      const nextStep = currentStep + 1\n      setCurrentStep(nextStep)\n      if (onStepChange) {\n        onStepChange(nextStep)\n      }\n    }\n  }\n\n  const handlePrevious = () => {\n    if (!isFirstStep) {\n      const prevStep = currentStep - 1\n      setCurrentStep(prevStep)\n      if (onStepChange) {\n        onStepChange(prevStep)\n      }\n    }\n  }\n\n  const handleStepClick = (stepIndex: number) => {\n    if (stepIndex < currentStep) {\n      setCurrentStep(stepIndex)\n      if (onStepChange) {\n        onStepChange(stepIndex)\n      }\n    }\n  }\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      {showStepIndicator && (\n        <StepIndicator\n          steps={steps}\n          currentStep={currentStep}\n          onStepClick={handleStepClick}\n        />\n      )}\n\n      <div className=\"rounded-lg border bg-card p-6\">\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-bold\">{currentStepData.title}</h2>\n          {currentStepData.description && (\n            <p className=\"mt-2 text-muted-foreground\">\n              {currentStepData.description}\n            </p>\n          )}\n        </div>\n\n        <div className=\"min-h-[300px]\">{currentStepData.content}</div>\n\n        <div className=\"mt-6 flex justify-between\">\n          <Button\n            variant=\"outline\"\n            onClick={handlePrevious}\n            disabled={isFirstStep || isValidating}\n          >\n            Previous\n          </Button>\n          <Button onClick={handleNext} disabled={isValidating}>\n            {isValidating ? 'Validating...' : isLastStep ? 'Complete' : 'Next'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\ninterface StepIndicatorProps {\n  steps: WizardStep[]\n  currentStep: number\n  onStepClick: (stepIndex: number) => void\n}\n\nfunction StepIndicator({ steps, currentStep, onStepClick }: StepIndicatorProps) {\n  return (\n    <div className=\"flex items-center justify-between\">\n      {steps.map((step, index) => {\n        const isActive = index === currentStep\n        const isCompleted = index < currentStep\n        const isClickable = index < currentStep\n\n        return (\n          <React.Fragment key={step.id}>\n            <div className=\"flex flex-col items-center\">\n              <button\n                onClick={() => isClickable && onStepClick(index)}\n                disabled={!isClickable}\n                className={cn(\n                  'flex h-10 w-10 items-center justify-center rounded-full border-2 font-medium transition-colors',\n                  isActive &&\n                    'border-primary bg-primary text-primary-foreground',\n                  isCompleted &&\n                    'border-primary bg-primary text-primary-foreground cursor-pointer hover:bg-primary/90',\n                  !isActive && !isCompleted && 'border-muted bg-background',\n                  isClickable && 'cursor-pointer'\n                )}\n              >\n                {isCompleted ? 'âœ“' : index + 1}\n              </button>\n              <div className=\"mt-2 text-center\">\n                <p\n                  className={cn(\n                    'text-sm font-medium',\n                    isActive && 'text-primary',\n                    !isActive && 'text-muted-foreground'\n                  )}\n                >\n                  {step.title}\n                </p>\n              </div>\n            </div>\n            {index < steps.length - 1 && (\n              <div\n                className={cn(\n                  'h-[2px] flex-1 mx-4 transition-colors',\n                  isCompleted ? 'bg-primary' : 'bg-muted'\n                )}\n              />\n            )}\n          </React.Fragment>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function useFormWizard(steps: WizardStep[]) {\n  const [currentStep, setCurrentStep] = React.useState(0)\n  const [completedSteps, setCompletedSteps] = React.useState<Set<number>>(new Set())\n\n  const goToStep = React.useCallback((stepIndex: number) => {\n    if (stepIndex >= 0 && stepIndex < steps.length) {\n      setCurrentStep(stepIndex)\n    }\n  }, [steps.length])\n\n  const nextStep = React.useCallback(() => {\n    if (currentStep < steps.length - 1) {\n      setCompletedSteps(prev => new Set(prev).add(currentStep))\n      setCurrentStep(currentStep + 1)\n    }\n  }, [currentStep, steps.length])\n\n  const previousStep = React.useCallback(() => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1)\n    }\n  }, [currentStep])\n\n  const reset = React.useCallback(() => {\n    setCurrentStep(0)\n    setCompletedSteps(new Set())\n  }, [])\n\n  return {\n    currentStep,\n    completedSteps,\n    goToStep,\n    nextStep,\n    previousStep,\n    reset,\n    isFirstStep: currentStep === 0,\n    isLastStep: currentStep === steps.length - 1,\n  }\n}\n"
    }
  ]
}
