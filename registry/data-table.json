{
  "name": "data-table",
  "description": "Feature-rich data table with sorting, pagination, and row selection",
  "type": "component",
  "dependencies": [
    "react",
    "@tanstack/react-table"
  ],
  "registryDependencies": [
    "button",
    "checkbox",
    "select",
    "table"
  ],
  "files": [
    {
      "path": "data-table/index.tsx",
      "type": "component",
      "content": "import * as React from 'react'\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  SortingState,\n  useReactTable,\n  VisibilityState,\n  ColumnFiltersState,\n  getFilteredRowModel,\n} from '@tanstack/react-table'\nimport { Button } from '@/components/ui/button'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { cn } from '@/lib/utils'\n\nexport interface DataTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[]\n  data: TData[]\n  enableRowSelection?: boolean\n  enablePagination?: boolean\n  enableSorting?: boolean\n  pageSize?: number\n  onRowSelectionChange?: (selectedRows: TData[]) => void\n  className?: string\n}\n\nexport function DataTable<TData, TValue>({\n  columns,\n  data,\n  enableRowSelection = false,\n  enablePagination = true,\n  enableSorting = true,\n  pageSize = 10,\n  onRowSelectionChange,\n  className,\n}: DataTableProps<TData, TValue>) {\n  const [sorting, setSorting] = React.useState<SortingState>([])\n  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([])\n  const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({})\n  const [rowSelection, setRowSelection] = React.useState({})\n\n  const tableColumns = React.useMemo(() => {\n    if (!enableRowSelection) return columns\n\n    const selectionColumn: ColumnDef<TData, TValue> = {\n      id: 'select',\n      header: ({ table }) => (\n        <Checkbox\n          checked={table.getIsAllPageRowsSelected()}\n          onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n          aria-label=\"Select all\"\n        />\n      ),\n      cell: ({ row }) => (\n        <Checkbox\n          checked={row.getIsSelected()}\n          onCheckedChange={(value) => row.toggleSelected(!!value)}\n          aria-label=\"Select row\"\n        />\n      ),\n      enableSorting: false,\n      enableHiding: false,\n    }\n\n    return [selectionColumn, ...columns]\n  }, [columns, enableRowSelection])\n\n  const table = useReactTable({\n    data,\n    columns: tableColumns,\n    getCoreRowModel: getCoreRowModel(),\n    getPaginationRowModel: enablePagination ? getPaginationRowModel() : undefined,\n    getSortedRowModel: enableSorting ? getSortedRowModel() : undefined,\n    getFilteredRowModel: getFilteredRowModel(),\n    onSortingChange: setSorting,\n    onColumnFiltersChange: setColumnFilters,\n    onColumnVisibilityChange: setColumnVisibility,\n    onRowSelectionChange: setRowSelection,\n    state: {\n      sorting,\n      columnFilters,\n      columnVisibility,\n      rowSelection,\n    },\n    initialState: {\n      pagination: {\n        pageSize,\n      },\n    },\n  })\n\n  React.useEffect(() => {\n    if (onRowSelectionChange) {\n      const selectedRows = table.getFilteredSelectedRowModel().rows.map(row => row.original)\n      onRowSelectionChange(selectedRows)\n    }\n  }, [rowSelection, onRowSelectionChange, table])\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            {table.getHeaderGroups().map(headerGroup => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map(header => (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? null\n                      : flexRender(\n                          header.column.columnDef.header,\n                          header.getContext()\n                        )}\n                  </TableHead>\n                ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {table.getRowModel().rows?.length ? (\n              table.getRowModel().rows.map(row => (\n                <TableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && 'selected'}\n                >\n                  {row.getVisibleCells().map(cell => (\n                    <TableCell key={cell.id}>\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={tableColumns.length} className=\"h-24 text-center\">\n                  No results.\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {enablePagination && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1 text-sm text-muted-foreground\">\n            {enableRowSelection && (\n              <>\n                {table.getFilteredSelectedRowModel().rows.length} of{' '}\n                {table.getFilteredRowModel().rows.length} row(s) selected.\n              </>\n            )}\n          </div>\n          <div className=\"flex items-center space-x-6 lg:space-x-8\">\n            <div className=\"flex items-center space-x-2\">\n              <p className=\"text-sm font-medium\">Rows per page</p>\n              <Select\n                value={`${table.getState().pagination.pageSize}`}\n                onValueChange={value => {\n                  table.setPageSize(Number(value))\n                }}\n              >\n                <SelectTrigger className=\"h-8 w-[70px]\">\n                  <SelectValue placeholder={table.getState().pagination.pageSize} />\n                </SelectTrigger>\n                <SelectContent side=\"top\">\n                  {[10, 20, 30, 40, 50].map(pageSize => (\n                    <SelectItem key={pageSize} value={`${pageSize}`}>\n                      {pageSize}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"flex w-[100px] items-center justify-center text-sm font-medium\">\n              Page {table.getState().pagination.pageIndex + 1} of{' '}\n              {table.getPageCount()}\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Button\n                variant=\"outline\"\n                className=\"h-8 w-8 p-0\"\n                onClick={() => table.setPageIndex(0)}\n                disabled={!table.getCanPreviousPage()}\n              >\n                <span className=\"sr-only\">Go to first page</span>\n                {'<<'}\n              </Button>\n              <Button\n                variant=\"outline\"\n                className=\"h-8 w-8 p-0\"\n                onClick={() => table.previousPage()}\n                disabled={!table.getCanPreviousPage()}\n              >\n                <span className=\"sr-only\">Go to previous page</span>\n                {'<'}\n              </Button>\n              <Button\n                variant=\"outline\"\n                className=\"h-8 w-8 p-0\"\n                onClick={() => table.nextPage()}\n                disabled={!table.getCanNextPage()}\n              >\n                <span className=\"sr-only\">Go to next page</span>\n                {'>'}\n              </Button>\n              <Button\n                variant=\"outline\"\n                className=\"h-8 w-8 p-0\"\n                onClick={() => table.setPageIndex(table.getPageCount() - 1)}\n                disabled={!table.getCanNextPage()}\n              >\n                <span className=\"sr-only\">Go to last page</span>\n                {'>>'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"
    }
  ]
}
